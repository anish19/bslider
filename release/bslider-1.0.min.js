(function(){if(__extend_parent__=function(a,b){function c(){this.constructor=a}_.each(_.keys(b),function(c){_.has(b,c)&&(a[c]=b[c])}),c.prototype=b.prototype,a.prototype=new c},"undefined"==typeof Backbone||null===Backbone)throw new Error("This plugin requires the latest version of Backbone. Can be found at http://documentcloud.github.com/backbone/backbone.js");if("undefined"==typeof jQuery)throw new Error("This plugin requires jQuery version 1.10.2 and above. Can be found at http://jquery.com");if("undefined"==typeof $.ui)throw new Error("This plugin requires jQuery-ui version 1.10.3. Can be found at http://jqueryui.com");Backbone.Slider=function(a){function b(){k=this,k.args=Array.prototype.slice.apply(arguments),Backbone.View.prototype.constructor.apply(k,k.args),Backbone.View.prototype.delegateEvents.apply(k,k.args),k.initialize()}function c(){k.$(".bslider-nav-left").on("click",k.navigateLeft),k.$(".bslider-nav-right").on("click",k.navigateRight)}function d(){var a=0;k.crossLinksContainer=$("<div />").addClass("cross-links"),k.$el.append(k.crossLinksContainer),k.viewCrossLinkMap={},k.crossLinks=[],_.each(k.views,function(b){var c="bsliderCrossLink"+a++,d=$("<div />").addClass("cross-link").attr("id",c).addClass("unselected");d.text(b.bsliderCrossLinkTitle?b.bsliderCrossLinkTitle:"View "+a),k.crossLinksContainer.append(d),k.crossLinks.push(d),_.extend(k.viewCrossLinkMap,_.object([c],[b]))}),k.$(".cross-link").on("click",k.navigateTo)}function e(a,b,c){$(a.$el).css("display","none"),$(a.$el).insertAfter($(b.$el)),$(b.$el).remove(),k.currentView=_.indexOf(k.views,a),$(a.$el).show("slide",{direction:c},300,function(){k.currentIndex=_.indexOf(k.views,h()),f()})}function f(){if(k.enableCrossLinks){var a=k.crossLinks[_.indexOf(k.views,h())];_.each(k.crossLinks,function(b){b===a?(b.addClass("selected"),b.removeClass("unselected")):(b.addClass("unselected"),b.removeClass("selected"))})}}function g(a){var b=i(a);b&&(k.currentView=a,k.sliderContainer.append(b.el),f())}function h(){return k.views[k.currentView]}function i(a){return!k.views.length||!k.cycleThrough&&(a>=k.views.length||0>a)?(a>=k.views.length?(k.currentIndex=k.views.length-1,k.currentView=k.currentIndex):0>a&&(k.currentIndex=0,k.currentView=k.currentIndex),void 0):(k.currentIndex=a>=k.views.length?0:0>a?k.views.length-1:a,k.views[k.currentIndex])}function j(){if(!k.views.length)throw new Error("Cannot render the slider. Need at least one view");k.currentView=0,k.sliderContainer.append(i(0).el),f()}__extend_parent__(b,a);var k;return b.prototype.className="bslider",b.prototype.events={"click .bslider-nav-left":"navigateLeft","click .bslider-nav-right":"navigateRight"},b.prototype.initialize=function(){if(k.views=k.views||[],k.crossLinkTitles=k.crossLinkTitles||{},k.cycleThrough=k.cycleThrough||!1,_.some(k.views,function(a){return!(a instanceof Backbone.View)}))throw new Error("Cannot initialize slider. Nothing other than backbone views are supported for now");k.currentIndex=-1,k.currentView=-1,c()},b.prototype.addView=function(a){if(!_.isArray(a)||null===a||"undefined"===a)throw new Error("Error adding views "+views);_.each(a,function(a){if(!(a instanceof Backbone.View))throw new Error("One of the added views is not a backbone view");k.views.push(a)})},b.prototype.render=function(a){var b=$("<div />").addClass("bslider-nav-container-left");return navContainerRight=$("<div />").addClass("bslider-nav-container-right"),null===a&&(a={}),k.sliderContainer=$("<div></div>").addClass("bslider-container"),k.navLeft=$("<i />").addClass("bslider-nav-left").addClass("icon-circle-arrow-left"),k.navRight=$("<i />").addClass("bslider-nav-right").addClass("icon-circle-arrow-right"),k.$el.html(k.sliderContainer),k.$el.prepend(b.append(k.navLeft)),k.$el.append(navContainerRight.append(k.navRight)),k.enableCrossLinks&&d(),k.initialViewToBeRendered?g(k.initialViewToBeRendered):j(),k},b.prototype.navigateTo=function(a){var b=a.currentTarget.id,c=_.result(k.viewCrossLinkMap,b);if("undefined"!=typeof c){var d=h();k.views.indexOf(c)<k.views.indexOf(d)?e(c,d,"left"):k.views.indexOf(c)>k.views.indexOf(d)&&e(c,d,"right")}},b.prototype.navigateLeft=function(){var a=i(--k.currentIndex);if("undefined"!=typeof a){var b=h();e(a,b,"left")}},b.prototype.navigateRight=function(){var a=i(++k.currentIndex);if("undefined"!=typeof a){var b=h();e(a,b,"right")}},b}(Backbone.View)}).call(this);