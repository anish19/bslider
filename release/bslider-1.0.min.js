(function(){if(__extend_parent__=function(a,b){function c(){this.constructor=a}_.each(_.keys(b),function(c){_.has(b,c)&&(a[c]=b[c])}),c.prototype=b.prototype,a.prototype=new c},"undefined"==typeof Backbone||null===Backbone)throw new Error("This plugin requires the latest version of Backbone. Can be found at http://documentcloud.github.com/backbone/backbone.js");if("undefined"==typeof jQuery)throw new Error("This plugin requires jQuery version 1.10.2 and above. Can be found at http://jquery.com");if("undefined"==typeof $.ui)throw new Error("This plugin requires jQuery-ui version 1.10.3. Can be found at http://jqueryui.com");Backbone.Slider=function(a){function b(){p=this,p.args=Array.prototype.slice.apply(arguments),Backbone.View.prototype.constructor.apply(p,p.args),Backbone.View.prototype.delegateEvents.apply(p,p.args),p.initialize()}function c(a){return!(a instanceof Backbone.View)}function d(a){throw new Error(a)}function e(a){a instanceof Backbone.View||d("One of the added views is not a backbone view"),p.views.push(a)}function f(){p.navigateLeft=_.wrap(p.navigateLeft,function(a){a(),p.postTransition()}),p.navigateRight=_.wrap(p.navigateRight,function(a){p.preTransition(),a(),p.postTransition()}),p.$(".bslider-nav-left").on("click",p.navigateLeft),p.$(".bslider-nav-right").on("click",p.navigateRight)}function g(){p.crossLinkCount=0,p.crossLinksContainer=$("<div />").addClass("cross-links"),p.$el.append(p.crossLinksContainer),p.viewCrossLinkMap={},p.crossLinks=[],_(p.views).each(h),p.$(".cross-link").on("click",p.navigateTo)}function h(a){var b="bsliderCrossLink"+p.crossLinkCount++,c=$("<div />").addClass("cross-link").attr("id",b).addClass("unselected");c.text(a.bsliderCrossLinkTitle?a.bsliderCrossLinkTitle:"View "+p.crossLinkCount),p.crossLinksContainer.append(c),p.crossLinks.push(c),_.extend(p.viewCrossLinkMap,_.object([b],[a]))}function i(a,b,c){$(a.$el).css("display","none"),$(a.$el).insertAfter($(b.$el)),$(b.$el).remove(),p.currentView=_.indexOf(p.views,a),$(a.$el).show("slide",{easing:"easeInOutQuad",direction:c},500,function(){p.currentIndex=_.indexOf(p.views,l()),j()})}function j(){if(p.enableCrossLinks){var a=p.crossLinks[_.indexOf(p.views,l())];_.each(p.crossLinks,function(b){b===a?b.addClass("selected").removeClass("unselected"):b.addClass("unselected").removeClass("selected")})}}function k(a){var b=m(a);b&&(p.currentView=a,p.sliderContainer.append(b.el),j())}function l(){return p.views[p.currentView]}function m(a){return!p.views.length||!p.cycleThrough&&(a>=p.views.length||0>a)?(a>=p.views.length?(p.currentIndex=p.views.length-1,p.currentView=p.currentIndex):0>a&&(p.currentIndex=0,p.currentView=p.currentIndex),void 0):(p.currentIndex=a>=p.views.length?0:0>a?p.views.length-1:a,p.views[p.currentIndex])}function n(){p.views.length||d("Cannot render the slider. Need at least one view"),p.currentView=0,p.sliderContainer.append(m(0).el),j()}function o(a){return null!=a}__extend_parent__(b,a);var p;return b.prototype.className="bslider",b.prototype.events={"click .bslider-nav-left":"navigateLeft","click .bslider-nav-right":"navigateRight"},b.prototype.initialize=function(){p.views=p.views||[],p.crossLinkTitles=p.crossLinkTitles||{},p.cycleThrough=p.cycleThrough||!1,p.preTransition=_.isFunction(p.preTransition)?p.preTransition:function(){},p.postTransition=_.isFunction(p.postTransition)?p.postTransition:function(){},_(p.views).some(c)&&d("Cannot initilize slider. Nothing other than backbone views are supported for now"),p.currentIndex=-1,p.currentView=-1,f()},b.prototype.addViews=function(a){_.isArray(a)&&o(a)||d("Error adding views "+a),_(a).each(e)},b.prototype.render=function(a){var b=$("<div />").addClass("bslider-nav-container-left");return navContainerRight=$("<div />").addClass("bslider-nav-container-right"),o(a)||(a={}),p.sliderContainer=$("<div></div>").addClass("bslider-container"),p.navLeft=$("<i />").addClass("bslider-nav-left").addClass("icon-circle-arrow-left"),p.navRight=$("<i />").addClass("bslider-nav-right").addClass("icon-circle-arrow-right"),p.$el.html(p.sliderContainer),p.$el.prepend(b.append(p.navLeft)),p.$el.append(navContainerRight.append(p.navRight)),p.enableCrossLinks&&g(),p.initialViewToBeRendered?k(p.initialViewToBeRendered):n(),p},b.prototype.navigateTo=function(a){var b=a.currentTarget.id,c=_.result(p.viewCrossLinkMap,b);if(o(c)){var d=l();p.views.indexOf(c)<p.views.indexOf(d)?i(c,d,"left"):p.views.indexOf(c)>p.views.indexOf(d)&&i(c,d,"right")}},b.prototype.navigateLeft=function(){var a=m(--p.currentIndex);if(o(a)){var b=l();i(a,b,"left")}},b.prototype.navigateRight=function(){var a=m(++p.currentIndex);if(o(a)){var b=l();i(a,b,"right")}},b}(Backbone.View)}).call(this);